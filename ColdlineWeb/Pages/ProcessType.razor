@using ColdlineWeb.Models
@code {
    [Parameter] public List<ReferenceEntity> ProcessTypes { get; set; } = new();
    [Parameter] public List<MachineModel> Machines { get; set; } = new();
    [Parameter] public EventCallback OnStartProcess { get; set; }

    private string selectedProcessTypeId = "";
    private string selectedMachineId = "";
    private bool preIndustrialization = false;

    private bool CanStartProcess => 
        !string.IsNullOrEmpty(selectedProcessTypeId) && 
        !string.IsNullOrEmpty(selectedMachineId);
}

<div class="process-card">
    <h5>Iniciar Novo Processo</h5>

    <div class="form-group">
        <label>Tipo de Processo</label>
        <select @bind="selectedProcessTypeId" class="form-control">
            <option value="">Selecione um tipo</option>
            @foreach (var processType in ProcessTypes)
            {
                <option value="@processType.Id">@processType.Name</option>
            }
        </select>
    </div>

    <div class="form-group">
        <label>Máquina</label>
        <select @bind="selectedMachineId" class="form-control">
            <option value="">Selecione uma máquina</option>
            @foreach (var machine in Machines)
            {
                <option value="@machine.Id">@($"{machine.Name} - {machine.IdentificationNumber}")</option>
            }
        </select>
    </div>

    <div class="form-group checkbox-group">
        <input type="checkbox" id="preIndustrialization" @bind="preIndustrialization" />
        <label for="preIndustrialization">Pré-industrialização</label>
    </div>

    <button class="btn btn-primary mt-2" @onclick="() => OnStartProcess.InvokeAsync()">
        Iniciar Processo
    </button>
</div>

<style>
    .process-card {
        background-color: white;
        padding: 20px;
        border-radius: 10px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        width: 400px;
        text-align: center;
    }

    .form-group {
        margin-bottom: 10px;
        text-align: left;
    }

    .form-group label {
        font-weight: bold;
        display: block;
        margin-bottom: 5px;
    }

    .form-control {
        width: 100%;
        padding: 8px;
        border: 1px solid #ccc;
        border-radius: 5px;
    }

    .checkbox-group {
        display: flex;
        align-items: center;
    }

    .checkbox-group input {
        margin-right: 10px;
    }
</style>
